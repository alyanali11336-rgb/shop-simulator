<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shop Sim - Clean Edition</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; overflow: hidden; }
        #hud { position: absolute; top: 0; width: 100%; display: flex; justify-content: space-around; padding: 15px; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); z-index: 100; border-bottom: 2px solid #ffd700; }
        .val { color: #ffd700; font-weight: bold; font-size: 1.2rem; }

        #game { position: relative; height: 100vh; width: 100%; background: linear-gradient(#2c3e50 60%, #4a332d 60%); }

        /* Shelves */
        .shelf { position: absolute; width: 130px; height: 100px; background: url('shelf.png') no-repeat bottom/contain; z-index: 10; }
        #s1 { top: 20%; left: 10%; } #s2 { top: 20%; right: 10%; }
        #s3 { top: 42%; left: 10%; } #s4 { top: 42%; right: 10%; }
        .items { position: absolute; bottom: 25px; width: 100%; display: grid; grid-template-columns: repeat(3, 1fr); text-align: center; font-size: 1.2rem; }

        /* Characters */
        .actor { position: absolute; height: 140px; z-index: 20; transition: all 1s ease; }
        .counter { position: absolute; bottom: 25%; width: 160px; z-index: 30; pointer-events: none; }
        #player { bottom: 32%; left: 35%; transform: translateX(-50%); }
        #cleaner { bottom: 8%; right: 5%; display: none; }

        /* Dog (CSS Built) */
        #dog { position: absolute; bottom: 35%; left: 5%; width: 40px; height: 25px; background: #8d6e63; border-radius: 5px; z-index: 5; }
        #dog::before { content: ''; position: absolute; top: -10px; right: -5px; width: 15px; height: 15px; background: #8d6e63; border-radius: 50%; }

        /* UI */
        #collect-btn { position: absolute; top: 45%; left: 35%; transform: translate(-50%, -50%); padding: 15px 30px; background: #27ae60; border: 3px solid white; border-radius: 50px; font-weight: bold; cursor: pointer; display: none; z-index: 100; }
        
        #footer { position: absolute; bottom: 0; width: 100%; display: flex; padding: 10px; background: rgba(0,0,0,0.8); box-sizing: border-box; }
        button { flex: 1; margin: 0 5px; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: white; }
        .btn-refill { background: #e67e22; }
        .btn-clean { background: #3498db; }
    </style>
</head>
<body>

<div id="hud">
    <div>Cash: <span id="cash" class="val">$200</span></div>
    <div>Stock: <span id="stock" class="val">0/36</span></div>
</div>

<div id="game">
    <div id="dog"></div>
    <div class="shelf" id="shelf1"><div class="items" id="ig1"></div></div>
    <div class="shelf" id="shelf2"><div class="items" id="ig2"></div></div>
    <div class="shelf" id="shelf3"><div class="items" id="ig3"></div></div>
    <div class="shelf" id="shelf4"><div class="items" id="ig4"></div></div>

    <img src="player.png" id="player" class="actor">
    <img src="cleaner_idle.png" id="cleaner" class="actor">
    <img src="counter.png" class="counter" style="left: 35%;">

    <div id="customers"></div>
    <div id="collect-btn" onclick="collectCash()">COLLECT CASH</div>
</div>

<div id="footer">
    <button class="btn-refill" onclick="refill()">Fill Stock ($50)</button>
    <button class="btn-clean" id="h-btn" onclick="buyCleaner()">Hire Cleaner ($150)</button>
</div>

<script>
    let cash = 200, stock = 0, cleanerHired = false;
    const items = ["üçé", "ü•õ", "üçû", "üç™"];
    let currentCust = null;

    function update() {
        document.getElementById('cash').innerText = `$${cash}`;
        document.getElementById('stock').innerText = `${stock}/36`;
        for(let i=1; i<=4; i++) {
            const g = document.getElementById(`ig${i}`); g.innerHTML = "";
            let end = Math.min(stock, i*9);
            for(let j=(i-1)*9; j<end; j++) g.innerHTML += `<span>${items[j%4]}</span>`;
        }
    }

    function refill() { if(cash >= 50 && stock < 36) { cash -= 50; stock += 12; update(); } }

    function buyCleaner() { 
        if(cash >= 150) { 
            cash -= 150; cleanerHired = true; 
            document.getElementById('cleaner').style.display = 'block';
            document.getElementById('h-btn').style.display = 'none';
            update(); 
        } 
    }

    function spawn() {
        if(stock <= 0 || document.querySelectorAll('.cust').length > 0) return;
        const c = document.createElement('img');
        const type = ["man", "old_lady"][Math.floor(Math.random()*2)];
        c.src = `${type}_walk.png`; c.className = "actor cust"; c.style.left = "-100px"; c.style.bottom = "8%";
        document.getElementById('customers').appendChild(c);

        setTimeout(() => {
            c.style.left = "15%"; // Go to shelf
            setTimeout(() => {
                stock--; update();
                c.style.left = "35%"; // Go to counter
                setTimeout(() => {
                    c.src = `${type}_idle.png`;
                    currentCust = { el: c, type: type };
                    document.getElementById('collect-btn').style.display = "block";
                }, 1000);
            }, 1000);
        }, 100);
    }

    function collectCash() {
        cash += 60; document.getElementById('collect-btn').style.display = "none";
        const target = currentCust.el;
        target.src = `${currentCust.type}_walk.png`;
        target.style.left = "110%";
        
        // Cleaner logic (automatic)
        if(cleanerHired) {
            const cl = document.getElementById('cleaner');
            cl.style.left = "35%";
            setTimeout(() => { cl.style.left = "80%"; }, 1500);
        }

        setTimeout(() => target.remove(), 1200);
        currentCust = null;
        update();
    }

    setInterval(spawn, 4000);
    update();
</script>
</body>
</html>
