<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chaos Store Simulator - Duck & Stickman</title>
    <style>
        :root { --glass: rgba(255, 255, 255, 0.15); --gold: #f1c40f; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: #121212; color: white; overflow: hidden; }

        /* Translucent Glass HUD */
        #hud {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            width: 90%; display: flex; justify-content: space-around; padding: 15px;
            background: var(--glass); backdrop-filter: blur(15px); border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1); z-index: 1000;
        }
        .stat-val { font-size: 1.1rem; font-weight: bold; color: var(--gold); }

        #stage {
            position: relative; height: 100vh; width: 100%;
            background: linear-gradient(180deg, #2c3e50, #000000);
        }

        /* Shelves */
        .shelf { position: absolute; width: 140px; height: 100px; background: url('shelf.png') no-repeat bottom/contain; z-index: 50; }
        #s1 { top:20%; left:10%; } #s2 { top:20%; right:10%; }
        #s3 { top:45%; left:10%; } #s4 { top:45%; right:10%; }
        .item-grid { display: grid; grid-template-columns: repeat(3, 1fr); position: absolute; bottom: 25px; width: 100%; text-align: center; }

        /* Actors */
        .actor { position: absolute; height: 130px; z-index: 400; transition: all 1s ease; }
        #player { bottom: 33%; left: 35%; transform: translateX(-50%); }
        #auto-staff { bottom: 33%; right: 15%; display: none; filter: hue-rotate(200deg); }
        .counter { position: absolute; bottom: 25%; width: 160px; z-index: 500; }

        /* The Duck ü¶Ü */
        #duck { position: absolute; bottom: 35%; font-size: 2rem; z-index: 350; transition: left 10s linear; }

        /* Stickman Thief üèÉ‚Äç‚ôÇÔ∏è */
        .stickman { position: absolute; bottom: 8%; font-size: 3rem; z-index: 600; cursor: crosshair; }

        /* Popups */
        #receipt {
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
            background: white; color: black; padding: 20px; border-radius: 15px;
            display: none; z-index: 2000; text-align: center; width: 180px; box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        #footer { position: absolute; bottom: 0; width: 100%; display: flex; padding: 15px; background: var(--glass); backdrop-filter: blur(10px); z-index: 1001; box-sizing: border-box; }
        .btn { flex: 1; margin: 0 5px; padding: 15px; border: none; border-radius: 12px; font-weight: bold; color: white; cursor: pointer; transition: 0.3s; }
        .btn-refill { background: #27ae60; } .btn-upgrade { background: #8e44ad; }
    </style>
</head>
<body>

<div id="hud">
    <div>Cash: <span id="c-val" class="stat-val">$300</span></div>
    <div>Lvl: <span id="l-val" class="stat-val">1</span></div>
    <div>Stock: <span id="s-val" class="stat-val">0/36</span></div>
</div>

<div id="stage">
    <div id="duck">ü¶Ü</div>

    <div id="s1" class="shelf"><div class="item-grid" id="ig1"></div></div>
    <div id="s2" class="shelf"><div class="item-grid" id="ig2"></div></div>
    <div id="s3" class="shelf"><div class="item-grid" id="ig3"></div></div>
    <div id="s4" class="shelf"><div class="item-grid" id="ig4"></div></div>

    <img src="player.png" id="player" class="actor">
    <img src="player.png" id="auto-staff" class="actor">

    <img src="counter.png" class="counter" style="left:35%;">
    <img src="counter.png" id="c-auto" class="counter" style="right:15%; display:none;">

    <div id="cust-layer"></div>

    <div id="receipt">
        <h3>RECEIPT</h3>
        <p id="rec-info">Item: üçé</p>
        <h2 id="rec-total">$60</h2>
        <button onclick="finishBilling()" class="btn btn-refill" style="width:100%">COLLECT CASH</button>
    </div>
</div>

<div id="footer">
    <button class="btn btn-refill" onclick="refill()">Order Stock ($50)</button>
    <button class="btn btn-upgrade" onclick="hireStaff()">Hire Staff ($200)</button>
</div>

<script>
    let cash = 300, stock = 0, lvl = 1, xp = 0, hasStaff = false;
    const items = ["üçé", "ü•õ", "üçû", "üçï", "üç™", "üç©"];
    let activeCust = null;

    function update() {
        document.getElementById('c-val').innerText = `$${cash}`;
        document.getElementById('l-val').innerText = lvl;
        document.getElementById('s-val').innerText = `${stock}/36`;
        for(let i=1; i<=4; i++) {
            const g = document.getElementById(`ig${i}`); g.innerHTML = "";
            let start = (i-1)*9; let end = Math.min(stock, i*9);
            for(let j=start; j<end; j++) g.innerHTML += `<span>${items[j%items.length]}</span>`;
        }
    }

    // Duck Movement ü¶Ü
    function moveDuck() {
        const d = document.getElementById('duck');
        d.style.left = "-50px";
        setTimeout(() => { d.style.left = "110%"; }, 100);
        setTimeout(moveDuck, 15000);
    }

    // Stickman Thief Logic üèÉ‚Äç‚ôÇÔ∏è
    function spawnThief() {
        if(Math.random() > 0.3) return;
        const thief = document.createElement('div');
        thief.className = "stickman";
        thief.innerText = "üèÉ‚Äç‚ôÇÔ∏èüí®";
        thief.style.left = "30%";
        document.getElementById('stage').appendChild(thief);

        thief.onclick = () => {
            cash += 50; 
            thief.innerText = "üòµ";
            alert("You caught the thief! Reward: $50");
            setTimeout(() => thief.remove(), 500);
            update();
        };

        setTimeout(() => {
            thief.style.transition = "left 2s linear";
            thief.style.left = "-100px";
            setTimeout(() => { if(thief.parentNode) { thief.remove(); cash -= 20; update(); }}, 2000);
        }, 1000);
    }

    function refill() { if(cash >= 50 && stock < 36) { cash -= 50; stock += 12; update(); } }

    function spawn() {
        if(stock <= 0 || document.querySelectorAll('.cust-box').length > 3) return;
        const layer = document.getElementById('cust-layer');
        const box = document.createElement('div');
        box.style.cssText = "position:absolute; bottom:8%; left:-100px; z-index:600; transition:all 1s;";
        const type = ["man", "old_lady", "police"][Math.floor(Math.random()*3)];
        box.innerHTML = `<img src="${type}_walk.png" style="height:130px;">`;
        layer.appendChild(box);

        setTimeout(() => {
            box.style.left = (Math.random() > 0.5 ? "15%" : "80%"); // Go to shelves
            setTimeout(() => {
                const item = items[Math.floor(Math.random()*items.length)];
                stock--; update();
                const isAuto = (hasStaff && Math.random() > 0.5);
                box.style.left = isAuto ? "80%" : "35%"; // Go to counter
                setTimeout(() => {
                    if(isAuto) {
                        cash += 60; xp += 20; leave(box, type); update();
                    } else {
                        activeCust = { el: box, type: type, item: item };
                        document.getElementById('receipt').style.display = "block";
                        document.getElementById('rec-info').innerText = "Bought: " + item;
                    }
                }, 1000);
            }, 1000);
        }, 100);
    }

    function finishBilling() {
        cash += 60; xp += 25;
        document.getElementById('receipt').style.display = "none";
        leave(activeCust.el, activeCust.type);
        activeCust = null;
        if(xp >= 100) { xp=0; lvl++; alert("LEVEL UP!"); }
        update();
    }

    function leave(el, type) {
        el.style.left = "110%";
        setTimeout(() => el.remove(), 1200);
    }

    function hireStaff() {
        if(cash >= 200) {
            cash -= 200; hasStaff = true;
            document.getElementById('auto-staff').style.display = "block";
            document.getElementById('c-auto').style.display = "block";
            update();
        }
    }

    setInterval(spawn, 5000);
    setInterval(spawnThief, 8000);
    moveDuck();
    update();
</script>
</body>
</html>
