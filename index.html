<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ultimate Shop Simulator</title>
    <style>
        body { margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; background: #1a1a1a; font-family: 'Courier New', monospace; }
        
        #game-container {
            width: 95vw; height: 70vh; background: #2c3e50; margin: auto;
            position: relative; border: 6px solid #5d4037; overflow: hidden;
        }

        /* Inventory & Library Styling */
        .shelf-container { position: absolute; top: 5%; width: 100%; display: flex; justify-content: space-around; z-index: 2; }
        .rack { width: 160px; height: 120px; background: #4e342e; border: 4px solid #3e2723; display: grid; grid-template-rows: 1fr 1fr; padding: 5px; text-align: center; }
        .shelf-row { border-bottom: 2px solid #3e2723; display: flex; justify-content: space-around; align-items: center; font-size: 24px; min-height: 40px; }

        /* Layers */
        .floor { position: absolute; bottom: 0; width: 100%; height: 35%; background: #5d4037; z-index: 1; }
        #player-sprite { position: absolute; bottom: 32%; width: 180px; left: 50%; transform: translateX(-50%); z-index: 5; }
        .counter { position: absolute; bottom: 25%; width: 400px; height: 100px; background: #8b4513; border: 4px solid #5d4037; z-index: 10; left: 50%; transform: translateX(-50%); }
        
        /* Characters from your File Structure */
        #customer-sprite { position: absolute; bottom: 12%; left: -200px; width: 170px; z-index: 30; transition: left 1.5s linear; }
        #cleaner-obj { position: absolute; bottom: 10%; width: 130px; z-index: 25; transition: left 1s linear; display: none; }
        .trash { position: absolute; font-size: 25px; z-index: 15; pointer-events: none; }

        /* UI Panel */
        #ui-panel { width: 100%; height: 160px; background: #e1b382; border-top: 6px solid #5d4037; display: flex; justify-content: center; align-items: center; gap: 20px; }
        .stat-box { background: #3e2723; color: #f1c40f; padding: 12px 25px; border-radius: 8px; font-weight: bold; border: 2px solid #f1c40f; font-size: 1.2rem; }
        .btn { padding: 15px 30px; font-weight: bold; cursor: pointer; border: none; border-radius: 8px; color: white; transition: 0.2s; font-size: 1rem; }
        
        #bill-btn { position:absolute; bottom:45%; left:50%; transform:translateX(-50%); background:#f39c12; display:none; z-index:100; box-shadow: 0 4px 0 #d35400; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="shelf-container">
        <div class="rack"><div class="shelf-row" id="s1"></div><div class="shelf-row" id="s2"></div><small style="color:white">GROCERY</small></div>
        <div class="rack"><div class="shelf-row" id="s3"></div><div class="shelf-row" id="s4"></div><small style="color:white">DAIRY</small></div>
        <div class="rack"><div class="shelf-row" id="s5"></div><div class="shelf-row" id="s6"></div><small style="color:white">SNACKS</small></div>
    </div>

    <div class="floor"></div>
    <img src="player.png" id="player-sprite"> <div class="counter"></div>
    
    <img src="cleaner_idle.png" id="cleaner-obj"> <img src="man_idle.png" id="customer-sprite"> <button id="bill-btn" class="btn" onclick="processBill()">COLLECT CASH üí∞</button>
</div>

<div id="ui-panel">
    <div class="stat-box">CASH: $<span id="cash">200</span></div>
    <div class="stat-box">STOCK: <span id="stock-count">0</span></div>
    <button class="btn" style="background: #27ae60;" onclick="buyStock()">BUY STOCK ($30)</button>
    <button id="hire-btn" class="btn" style="background: #2980b9;" onclick="hireCleaner()">HIRE CLEANER ($150)</button>
</div>

<script>
    let cash = 200, stock = 0, isWaiting = false, hasCleaner = false;
    let currentCust = "";

    // Product Library
    const library = ["üçé", "üçû", "ü•õ", "üßÄ", "üç™", "ü•§"];

    function buyStock() {
        if (cash >= 30) {
            cash -= 30; stock += 6;
            updateUI(); updateShelves();
        }
    }

    function updateShelves() {
        for(let i=1; i<=6; i++) {
            document.getElementById('s'+i).innerText = (i <= stock) ? library[i-1] : "";
        }
    }

    // Customer System based on your files
    function spawnCustomer() {
        if (isWaiting) return;
        isWaiting = true;

        const cust = document.getElementById('customer-sprite');
        const types = ["man", "old_lady"]; // Man and Old Lady from your structure
        currentCust = types[Math.floor(Math.random() * types.length)];

        // Walking Animation File
        cust.src = `${currentCust}_walk.png`;
        cust.style.left = "40%";

        setTimeout(() => {
            // Idle Animation File
            cust.src = `${currentCust}_idle.png`;
            if (stock > 0) {
                document.getElementById('bill-btn').style.display = "block";
                createTrash();
            } else {
                setTimeout(customerLeave, 2000);
            }
        }, 1500);
    }

    function processBill() {
        let earn = (currentCust === "old_lady") ? 80 : 50;
        cash += earn; stock--;
        document.getElementById('bill-btn').style.display = "none";
        updateUI(); updateShelves();
        customerLeave();
    }

    function customerLeave() {
        const cust = document.getElementById('customer-sprite');
        cust.src = `${currentCust}_walk.png`;
        cust.style.left = "110%";
        setTimeout(() => {
            cust.style.transition = "none"; cust.style.left = "-200px";
            setTimeout(() => { cust.style.transition = "left 1.5s linear"; isWaiting = false; }, 100);
        }, 1500);
    }

    // Cleaner Logic
    function hireCleaner() {
        if (cash >= 150 && !hasCleaner) {
            cash -= 150; hasCleaner = true;
            document.getElementById('cleaner-obj').style.display = 'block';
            document.getElementById('hire-btn').innerText = "CLEANER ON DUTY";
            updateUI();
            startCleaningAI();
        }
    }

    function startCleaningAI() {
        setInterval(() => {
            let dirt = document.querySelector('.trash');
            if (dirt) {
                let cln = document.getElementById('cleaner-obj');
                let targetX = parseFloat(dirt.style.left);
                cln.src = "cleaner_walk_right.png";
                cln.style.left = targetX + "%";
                setTimeout(() => { dirt.remove(); cln.src = "cleaner_idle.png"; }, 1000);
            }
        }, 4000);
    }

    function createTrash() {
        const t = document.createElement('div');
        t.className = 'trash'; t.innerText = 'üçÉ';
        t.style.left = (Math.random() * 60 + 20) + "%";
        t.style.bottom = "5%";
        document.getElementById('game-container').appendChild(t);
    }

    function updateUI() {
        document.getElementById('cash').innerText = cash;
        document.getElementById('stock-count').innerText = stock;
    }

    setInterval(spawnCustomer, 7000);
</script>
</body>
</html>
