<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shop Sim - Visual Items</title>
    <style>
        :root { --ui-panel: #3e2723; --gold: #f1c40f; }
        body { margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; background: #1a1a1a; overflow: hidden; font-family: 'Segoe UI', sans-serif; }

        #top-stats {
            display: grid; grid-template-columns: repeat(4, 1fr);
            background: var(--ui-panel); padding: 12px; border-bottom: 4px solid var(--gold); z-index: 100;
        }
        .stat-item { color: var(--gold); text-align: center; font-size: 0.9rem; font-weight: bold; border-right: 1px solid #5d4037; }

        #game-view {
            flex: 1; position: relative; 
            background: linear-gradient(#2c3e50 65%, #4a332d 65%);
        }

        /* Shelves & Items Container */
        .shelf-container { position: absolute; width: 150px; height: 100px; z-index: 5; top: 25%; }
        #sc-1 { left: 5%; }
        #sc-2 { right: 5%; }
        
        .shelf-img { width: 100%; position: absolute; bottom: 0; }
        .items-grid { 
            position: absolute; top: 0; left: 10%; width: 80%; height: 70%;
            display: flex; flex-wrap: wrap; justify-content: center; align-content: center; gap: 2px; font-size: 1.2rem;
        }

        #counter-img { position: absolute; bottom: 26%; left: 50%; transform: translateX(-50%); width: 240px; z-index: 15; }

        /* Characters Sizing */
        .character { position: absolute; height: 155px; width: auto; transition: left 1.5s linear; }
        #player { bottom: 35%; left: 50%; transform: translateX(-50%); z-index: 10; }
        #customer { bottom: 10%; left: -200px; z-index: 20; }
        #cleaner { bottom: 10%; z-index: 18; display: none; }

        #collect-money { 
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
            background: #f39c12; color: white; padding: 15px 30px; border-radius: 50px;
            font-weight: bold; display: none; z-index: 200; cursor: pointer; border: 3px solid white;
        }

        #controls { height: 12vh; background: #e1b382; display: flex; padding: 10px; gap: 10px; border-top: 5px solid #3e2723; }
        .btn { flex: 1; border: none; border-radius: 10px; font-weight: bold; font-size: 1rem; cursor: pointer; color: white; }
        #refill-btn { background: #27ae60; box-shadow: 0 4px 0 #1e8449; }
        #hire-btn { background: #2980b9; box-shadow: 0 4px 0 #1a5276; }
    </style>
</head>
<body>

<div id="top-stats">
    <div class="stat-item">CASH<br><span id="cash">$200</span></div>
    <div class="stat-item">LVL<br><span id="lvl">1</span></div>
    <div class="stat-item">STOCK<br><span id="stk">0/50</span></div>
    <div class="stat-item">XP<br><span id="xp">0%</span></div>
</div>

<div id="game-view">
    <div class="shelf-container" id="sc-1">
        <div class="items-grid" id="items-1"></div>
        <img src="shelf.png" class="shelf-img">
    </div>

    <div class="shelf-container" id="sc-2">
        <div class="items-grid" id="items-2"></div>
        <img src="shelf.png" class="shelf-img">
    </div>
    
    <img src="player.png" class="character" id="player"> 
    <img src="counter.png" id="counter-img"> 
    
    <img src="man_idle.png" class="character" id="customer"> 
    <img src="cleaner_idle.png" class="character" id="cleaner">

    <div id="collect-money" onclick="doSale()">COLLECT MONEY üí∞</div>
</div>

<div id="controls">
    <button class="btn" id="refill-btn" onclick="refill()">REFILL STOCK ($50)</button>
    <button class="btn" id="hire-btn" onclick="hire()">HIRE CLEANER ($150)</button>
</div>

<script>
    let money = 200, level = 1, stock = 0, xp = 0, busy = false;
    let currentCust = "";
    const itemEmojis = ["üçé", "üçû", "ü•õ", "ü•§", "üç™", "üçï"];

    function updateUI() {
        document.getElementById('cash').innerText = `$${money}`;
        document.getElementById('lvl').innerText = level;
        document.getElementById('stk').innerText = `${stock}/50`;
        document.getElementById('xp').innerText = `${xp}%`;
        drawItems();
    }

    function drawItems() {
        const grid1 = document.getElementById('items-1');
        const grid2 = document.getElementById('items-2');
        grid1.innerHTML = ""; grid2.innerHTML = "";
        
        // Shelf 1 displays first 25 items
        for(let i=0; i<Math.min(stock, 25); i++) {
            grid1.innerHTML += `<span>${itemEmojis[i % itemEmojis.length]}</span>`;
        }
        // Shelf 2 displays next 25 items
        for(let i=25; i<Math.min(stock, 50); i++) {
            grid2.innerHTML += `<span>${itemEmojis[i % itemEmojis.length]}</span>`;
        }
    }

    function refill() {
        if (money >= 50) {
            money -= 50; stock = Math.min(stock + 20, 50);
            updateUI();
        }
    }

    function spawn() {
        if (busy) return;
        busy = true;
        const c = document.getElementById('customer');
        const types = ["man", "old_lady", "police"];
        currentCust = types[Math.floor(Math.random() * types.length)];
        
        c.src = `${currentCust}_walk.png`;
        c.style.left = "42%";

        setTimeout(() => {
            c.src = `${currentCust}_idle.png`;
            if (stock > 0) document.getElementById('collect-money').style.display = 'block';
            else setTimeout(leave, 1500);
        }, 1500);
    }

    function doSale() {
        let reward = (currentCust === "police") ? 120 : 60;
        money += reward; stock--; xp += 20;
        document.getElementById('collect-money').style.display = 'none';
        if (xp >= 100) { xp = 0; level++; }
        updateUI();
        leave();
    }

    function leave() {
        const c = document.getElementById('customer');
        c.src = `${currentCust}_walk.png`;
        c.style.left = "110%";
        setTimeout(() => {
            c.style.transition = "none"; c.style.left = "-200px";
            setTimeout(() => { c.style.transition = "left 1.5s linear"; busy = false; }, 100);
        }, 1500);
    }

    function hire() {
        if (money >= 150) {
            money -= 150;
            document.getElementById('cleaner').style.display = 'block';
            document.getElementById('cleaner').style.left = "75%";
            updateUI();
        }
    }

    setInterval(spawn, 5000);
</script>
</body>
</html>
