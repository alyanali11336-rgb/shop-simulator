<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Responsive Shop Simulator</title>
    <style>
        :root {
            --floor: #5d4037;
            --wall: #2c3e50;
            --counter-color: #8b4513;
        }

        body { margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; background: #000; font-family: sans-serif; overflow: hidden; }

        /* Game Screen Area */
        #game-stage {
            flex: 1;
            position: relative;
            background: var(--wall);
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Everything sits on floor */
        }

        /* The Missing Counter */
        #counter-block {
            position: absolute;
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            height: 80px;
            background: var(--counter-color);
            border: 4px solid #3e2723;
            border-radius: 5px;
            z-index: 15;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        /* Floor Layer */
        #floor-layer {
            height: 30%;
            background: var(--floor);
            border-top: 5px solid #3e2723;
            position: relative;
        }

        /* Characters Integration */
        #player {
            position: absolute;
            bottom: 30%; /* Standing behind counter */
            left: 50%;
            transform: translateX(-50%);
            width: 130px;
            z-index: 10;
        }

        #customer {
            position: absolute;
            bottom: 12%; /* Standing on floor */
            left: -150px;
            width: 140px;
            z-index: 20;
            transition: left 1.5s linear;
        }

        #cleaner {
            position: absolute;
            bottom: 8%;
            width: 100px;
            z-index: 18;
            transition: left 1.2s linear;
            display: none;
        }

        /* Mobile Controls Panel */
        #ui-panel {
            height: 35vh;
            background: #e1b382;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            padding: 10px;
            box-sizing: border-box;
            border-top: 6px solid #5d4037;
        }

        .stat { background: #3e2723; color: #f1c40f; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.9rem; border: 2px solid #f1c40f; }
        .btn { background: #27ae60; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #1e8449; }
        .btn:active { transform: translateY(2px); box-shadow: 0 2px 0 #1e8449; }

        #bill-btn {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            background: #f39c12;
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            display: none;
            z-index: 100;
        }
    </style>
</head>
<body>

<div id="game-stage">
    <div style="position:absolute; top:10%; left:10%; color:white; background:rgba(0,0,0,0.5); padding:10px;" id="shelf">Empty Shelf</div>
    
    <img src="player.png" id="player"> 
    <div id="counter-block"></div>
    
    <img src="man_idle.png" id="customer"> 
    <img src="cleaner_idle.png" id="cleaner">

    <div id="floor-layer">
        <div id="bill-btn" onclick="billCustomer()">COLLECT CASH ðŸ’°</div>
    </div>
</div>

<div id="ui-panel">
    <div class="stat">CASH<br><b id="m-val">$200</b></div>
    <div class="stat">LEVEL<br><b id="l-val">1</b></div>
    <div class="stat">STOCK<br><b id="s-val">0/20</b></div>
    <div class="stat">XP<br><b id="x-val">0%</b></div>
    
    <button class="btn" onclick="buyStock()">BUY STOCK ($20)</button>
    <button class="btn" style="background:#2980b9; box-shadow:0 4px 0 #1a5276;" onclick="hireStaff()">HIRE CLEANER ($150)</button>
</div>

<script>
    let cash = 200, stock = 0, lvl = 1, xp = 0, active = false;
    let currentType = "";

    function buyStock() {
        if (cash >= 20) {
            cash -= 20; stock = Math.min(stock + 10, 20);
            document.getElementById('shelf').innerText = "STOCKED: ðŸ“¦ðŸ“¦ðŸ“¦";
            updateUI();
        }
    }

    function spawn() {
        if (active) return;
        active = true;
        const c = document.getElementById('customer');
        const types = ["man", "old_lady", "police"]; // All from your GitHub
        currentType = types[Math.floor(Math.random() * types.length)];

        c.src = `${currentType}_walk.png`; 
        c.style.left = "40%";

        setTimeout(() => {
            c.src = `${currentType}_idle.png`;
            if (stock > 0) document.getElementById('bill-btn').style.display = 'block';
            else setTimeout(leave, 1500);
        }, 1500);
    }

    function billCustomer() {
        let reward = (currentType === "police") ? 100 : 50;
        cash += reward; stock--; xp += 25;
        document.getElementById('bill-btn').style.display = 'none';
        if (xp >= 100) { xp = 0; lvl++; alert("LEVEL UP!"); }
        updateUI();
        leave();
    }

    function leave() {
        const c = document.getElementById('customer');
        c.src = `${currentType}_walk.png`;
        c.style.left = "110%";
        setTimeout(() => {
            c.style.transition = "none"; c.style.left = "-150px";
            setTimeout(() => { c.style.transition = "left 1.5s linear"; active = false; }, 100);
        }, 1500);
    }

    function hireStaff() {
        if (cash >= 150) {
            cash -= 150; 
            document.getElementById('cleaner').style.display = 'block';
            updateUI();
        }
    }

    function updateUI() {
        document.getElementById('m-val').innerText = `$${cash}`;
        document.getElementById('s-val').innerText = `${stock}/20`;
        document.getElementById('l-val').innerText = lvl;
        document.getElementById('x-val').innerText = `${xp}%`;
    }

    setInterval(spawn, 5000);
</script>
</body>
</html>
